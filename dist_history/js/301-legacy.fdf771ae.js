"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[301],{11301:function(e,r,t){t.r(r),t.d(r,{default:function(){return h}});var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-container",[t("el-main",[t("div",{staticClass:"register"},[t("h3",[e._v("注册新用户 "),t("span",{staticClass:"go"},[e._v("我有账号，去 "),t("router-link",{attrs:{to:"/login"}},[e._v("登陆")])],1)]),t("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[t("el-form",{ref:"ruleForm",staticClass:"reg-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",inline:!1}},[t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入你的手机号"},model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"code",inline:!0}},[t("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"left"}},[t("el-col",{attrs:{span:60}},[t("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.ruleForm.code,callback:function(r){e.$set(e.ruleForm,"code",r)},expression:"ruleForm.code"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"info",icon:"el-icon-message"},on:{click:e.getCode}},[e._v("验证码")])],1)],1)],1),t("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入登录密码"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[t("el-input",{attrs:{placeholder:"请输入确认密码"},model:{value:e.ruleForm.password2,callback:function(r){e.$set(e.ruleForm,"password2",r)},expression:"ruleForm.password2"}})],1),t("el-form-item",{attrs:{prop:"isAgree"}},[t("el-checkbox",{attrs:{label:"同意协议并注册《尚品汇用户协议》",name:"type"},model:{value:e.ruleForm.isAgree,callback:function(r){e.$set(e.ruleForm,"isAgree",r)},expression:"ruleForm.isAgree"}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"150px","background-color":"rgba(255,2,2,0.77)"},attrs:{type:"danger"},on:{click:function(r){return e.submitRegForm("ruleForm")}}},[e._v("完成注册")]),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)]),t("el-footer",[t("div",{staticClass:"copyright"},[t("ul",[t("li",[e._v("关于我们")]),t("li",[e._v("联系我们")]),t("li",[e._v("联系客服")]),t("li",[e._v("商家入驻")]),t("li",[e._v("营销中心")]),t("li",[e._v("手机尚品汇")]),t("li",[e._v("销售联盟")]),t("li",[e._v("尚品汇社区")])]),t("div",{staticClass:"address"},[e._v("地址：北京市昌平区宏福科技园综合楼6层")]),t("div",{staticClass:"beian"},[e._v("京ICP备19006430号 ")])])])],1)},s=[],l=t(16198),a=t(67212),n=t.n(a),i=(t(21703),t(74916),t(77601),t(44228)),u=t.n(i),c={name:"Register",data:function(){var e=this,r=function(e,r,t){var o=/^1[34578]\d{9}$/;r?o.test(r)||t(new Error("请输入正确格式手机号")):t(new Error("请输入手机号")),t()},t=function(r,t,o){t?(e.ruleForm.code!==e.$store.state.store_user.code&&o(new Error("验证码输入错误")),o()):o(new Error("请输入验证码"))},o=function(r,t,o){t?(e.ruleForm.password.length<6&&o(new Error("请输入6位数以上密码")),o()):o(new Error("请输入密码"))},s=function(r,t,o){t?(e.ruleForm.password!==e.ruleForm.password2&&o(new Error("两次密码不一致")),o()):o(new Error("请输入确认密码"))},l=function(e,r,t){r?t():t(new Error("-----------请勾选协议"))};return{ruleForm:{phone:"",code:"",password:"",password2:"",isAgree:!0},rules:{phone:[{required:!0,validator:r,trigger:"blur"}],code:[{required:!0,validator:t,trigger:"change"}],password:[{required:!0,validator:o,trigger:"blur"}],password2:[{required:!0,validator:s,trigger:"blur"}],isAgree:[{required:!0,validator:l,trigger:"change"}]}}},methods:{submitRegForm:function(e){var r=this;this.$refs[e].validate(function(){var e=(0,l.Z)(n().mark((function e(t){var o,s,l,a;return n().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}return console.log("!!"),e.prev=2,o=r.ruleForm,s=o.phone,l=o.code,a=o.password,e.next=6,r.$store.dispatch("userRegister",{phone:s,code:l,password:a});case 6:return r.$router.push("/login"),e.abrupt("return");case 10:e.prev=10,e.t0=e["catch"](2),alert(e.t0.message);case 13:e.next=17;break;case 15:return console.log("error submit!!"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(r){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},getCode:u()((0,l.Z)(n().mark((function e(){return n().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,""!==this.ruleForm.phone){e.next=3;break}return e.abrupt("return",alert("请输入手机号"));case 3:return e.next=5,this.$store.dispatch("getCode",this.ruleForm.phone);case 5:this.ruleForm.code=this.$store.state.store_user.code,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),1e3)}},p=c,d=t(43736),m=(0,d.Z)(p,o,s,!1,null,"66aa8e5e",null),h=m.exports}}]);